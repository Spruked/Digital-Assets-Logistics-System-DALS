version: '3.8'

services:
  # Regent - Greeter & Onboarding
  regent-worker:
    build:
      context: .
      dockerfile: Dockerfile.worker
    environment:
      WORKER_NAME: Regent
      TARGET_USER_ID: ${USER_ID:-demo_user}
      CALI_X_ONE_API: http://dals-controller:8003
      SKG_API: http://localhost:8002
      UQV_API: http://dals-controller:8003
    networks:
      - dals-network
    restart: unless-stopped

  # Nora - Timeline & Service Upsell
  nora-worker:
    build:
      context: .
      dockerfile: Dockerfile.worker
    environment:
      WORKER_NAME: Nora
      TARGET_USER_ID: ${USER_ID:-demo_user}
      CALI_X_ONE_API: http://dals-controller:8003
      SKG_API: http://localhost:8002
      UQV_API: http://dals-controller:8003
    networks:
      - dals-network
    restart: unless-stopped

  # Mark - Content Producer
  mark-worker:
    build:
      context: .
      dockerfile: Dockerfile.worker
    environment:
      WORKER_NAME: Mark
      TARGET_USER_ID: ${USER_ID:-demo_user}
      CALI_X_ONE_API: http://dals-controller:8003
      SKG_API: http://localhost:8002
      UQV_API: http://dals-controller:8003
    networks:
      - dals-network
    restart: unless-stopped

networks:
  dals-network:
    external: true
